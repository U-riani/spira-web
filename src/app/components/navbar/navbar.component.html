<!-- Navbar Component -->
<nav class="sticky bg-[#231f20] dark:bg-[#231f20] w-full z-50">
  <div
    class="max-w-screen-xl mx-auto flex items-center justify-between px-4 py-2"
    (click)="onClose($event)"
  >
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
      <img
        src="assets/spira-logo.png"
        class="h-12 object-contain object-center"
        alt="Website Logo"
      />
    </a>

    <!-- navbar icons container -->
    <div class="flex items-between space-x-4 gap-2 md:order-3">
      <!-- buy now button -->
      <a
        href="https://spirarecords.bandcamp.com/album/convergence-chapter-ii"
        target="_blank"
        class="flex md:order-1 m-0"
      >
        <button
          class="cursor-pointer text-[#fff1da] py-2 px-2 flex items-center gap-2 rounded hover:bg-[#fff1da]/10 md:me-[-8px]"
        >
          <svg
            class="w-6 h-6"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 640 512"
            fill="currentColor"
          >
            <path
              d="M36.8 192l566.3 0c20.3 0 36.8-16.5 36.8-36.8c0-7.3-2.2-14.4-6.2-20.4L558.2 21.4C549.3 8 534.4 0 518.3 0L121.7 0c-16 0-31 8-39.9 21.4L6.2 134.7c-4 6.1-6.2 13.2-6.2 20.4C0 175.5 16.5 192 36.8 192zM64 224l0 160 0 80c0 26.5 21.5 48 48 48l224 0c26.5 0 48-21.5 48-48l0-80 0-160-64 0 0 160-192 0 0-160-64 0zm448 0l0 256c0 17.7 14.3 32 32 32s32-14.3 32-32l0-256-64 0z"
            />
          </svg>
        </button>
      </a>

      <!-- Mobile search toggle -->
      <div class="flex justify-center items-center m-0">
        <button
          #openSearchButton
          id="openSearchButton"
          (click)="toggleSearch($event, openSearchButton)"
          type="button"
          aria-controls="navbar-search"
          aria-expanded="false"
          class="cursor-pointer p-2 text-[#fff1da] text-gray-500 dark:text-[#fff1da] hover:hover:bg-[#fff1da]/10 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm"
        >
          <svg
            class="w-5 h-5"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 20 20"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
            />
          </svg>
          <span class="sr-only">Search</span>
        </button>
      </div>

      <!-- mobile openMenu button -->
      <button
        id="openMenuButton"
        (click)="toggleMenu($event)"
        class="p-2 pe-0 relative w-9 h-9 flex flex-col justify-between items-center md:hidden z-50 overflow-visible"
      >
        <!-- Top bar -->
        <span
          class="block h-[2px] bg-[#fff1da] transition-transform duration-300"
          [ngClass]="{
            'burder-menu-button-top-open': isMenuOpen,
            'burder-menu-button-top-close': !isMenuOpen
          }"
        ></span>

        <!-- Middle bar -->
        <span
          class="block h-[2px] w-6 bg-[#fff1da] transition-all duration-300"
          [ngClass]="{
            'opacity-0': isMenuOpen,
            'opacity-100': !isMenuOpen
          }"
        ></span>

        <!-- Bottom bar -->
        <span
          class="block h-[2px] bg-[#fff1da] transition-transform duration-300"
          [ngClass]="{
            'burder-menu-button-bottom-open': isMenuOpen,
            'burder-menu-button-bottom-close': !isMenuOpen
          }"
        ></span>
      </button>
    </div>
    <!-- Desktop menu -->
    <ul class="hidden md:flex space-x-2 font-medium">
      <li>
        <a
          routerLink="/"
          routerLinkActive="text-blue-700"
          class="cursor-pointer hover:bg-[#fff1da]/10 dark:text-[#fff1da] pt-1 pb-2 px-3"
          >Home</a
        >
      </li>
      <li>
        <a
          routerLink="/about"
          routerLinkActive="text-blue-700"
          class="cursor-pointer hover:bg-[#fff1da]/10 dark:text-[#fff1da] pt-1 pb-2 px-3"
          >About Spira</a
        >
      </li>
      <li>
        <a
          routerLink="/artists"
          routerLinkActive="text-blue-700"
          class="cursor-pointer hover:bg-[#fff1da]/10 dark:text-[#fff1da] pt-1 pb-2 px-3"
          >Artists</a
        >
      </li>
      <li>
        <a
          routerLink="/releases"
          routerLinkActive="text-blue-700"
          class="cursor-pointer hover:bg-[#fff1da]/10 dark:text-[#fff1da] pt-1 pb-2 px-3"
          >Releases</a
        >
      </li>
      <li>
        <a
          routerLink="/podcasts"
          routerLinkActive="text-blue-700"
          class="cursor-pointer hover:bg-[#fff1da]/10 dark:text-[#fff1da] pt-1 pb-2 px-3"
          >Podcasts</a
        >
      </li>
      <li>
        <a
          routerLink="/showcases"
          routerLinkActive="text-blue-700"
          class="cursor-pointer hover:bg-[#fff1da]/10 dark:text-[#fff1da] pt-1 pb-2 px-3"
          >Showcases</a
        >
      </li>
    </ul>
  </div>
</nav>

<!-- Offcanvas Sidebar -->
<div
  class="fixed right-0 top-18 h-[calc(100%-4rem)] w-64 bg-neutral-800 shadow-lg z-40 transform transition-transform duration-300 ease-in-out md:hidden"
  [ngClass]="{ 'translate-x-0': isMenuOpen, 'translate-x-full': !isMenuOpen }"
>
  <div class="p-4 flex justify-between items-center border-b text-[#fff1da]">
    <span>MENU</span>
  </div>

  <ul class="flex flex-col space-y-4 p-4 font-medium">
    <li>
      <a routerLink="/about" (click)="toggleMenu($event)" class="text-[#fff1da]"
        >About Spira</a
      >
    </li>
    <li>
      <a routerLink="/artists" (click)="toggleMenu($event)" class="text-[#fff1da]"
        >Artists</a
      >
    </li>
    <li>
      <a
        routerLink="/releases"
        (click)="toggleMenu($event)"
        class="text-[#fff1da]"
        >Releases</a
      >
    </li>
    <li>
      <a
        routerLink="/podcasts"
        (click)="toggleMenu($event)"
        class="text-[#fff1da]"
        >Podcasts</a
      >
    </li>
    <li>
      <a
        routerLink="/showcases"
        (click)="toggleMenu($event)"
        class="text-[#fff1da]"
        >Showcases</a
      >
    </li>
  </ul>
</div>

<!-- offcanvas search -->
<div
  id="searchOffcanvas"
  #searchOffcanvas
  class="fixed right-0 top-16 h-full pt-4 w-full bg-neutral-800 shadow-lg z-40 transform transition-transform duration-300 ease-in-out"
  [ngClass]="{
    'translate-y-0': isSearchOpen,
    'translate-y-[-200%]': !isSearchOpen
  }"
>
  <div class="py-2 px-4 max-w-screen-xl mx-auto">
    <div
      class="relative flex items-center justify-between md:justify-center mb-4"
    >
      <div class="w-[80%] max-w-[400px]">
        <label
          for="default-search"
          class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white"
          >Search</label
        >
        <div class="relative">
          <div
            class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
          >
            <svg
              class="w-4 h-4 text-gray-500 dark:text-gray-400"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 20 20"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
              />
            </svg>
          </div>
          <input
            type="search"
            id="default-search"
            class="block w-full p-4 ps-10 text-sm text-gray-900 rounded-0 bg-neutral-900 focus:ring-white-500 dark:bg-neutral-900 dark:placeholder-gray-400 dark:text-white dark:focus:ring-white-500"
            placeholder="Search  . . ."
            required
          />
          <button
            type="submit"
            class="text-white absolute end-2.5 bottom-2.5 bg-gray-900 hover:bg-white-800 focus:ring-4 focus:outline-none focus:ring-white-300 font-medium rounded-0 text-sm px-4 py-2 dark:bg-neutral-600 dark:hover:bg-white-700 dark:focus:ring-white-800"
          >
            SEARCH
          </button>
        </div>
      </div>
      <div class="md:pt-2.5 md:absolute md:right-0 md:top-0">
        <button
          #searchOffcanvasButton
          type="button"
          class="ms-auto bg-neutral-500 text-gray-400 hover:text-gray-900 rounded-0 focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex items-center justify-center h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-neutral-700 dark:hover:bg-gray-700"
          aria-label="Close"
          (click)="toggleSearch($event, searchOffcanvasButton)"
        >
          <span class="sr-only">Close</span>
          <svg
            class="w-3 h-3"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 14"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
            />
          </svg>
        </button>
      </div>
    </div>
    <hr />
    <div class="flex flex-col items-start w-full">
      <div class="text-white w-full bg-neutral-500 p-2 mb-1">
        <p>some searched text...</p>
      </div>
      <div class="text-white w-full bg-neutral-500 p-2 mb-1">
        <p>some searched text sdsad sad sad ...</p>
      </div>
      <div class="text-white w-full bg-neutral-500 p-2 mb-1">
        <p>some searched text ....</p>
      </div>
      <div class="text-white w-full bg-neutral-500 p-2 mb-1">
        <p>some searched text sdsad sad sad ...</p>
      </div>
    </div>
  </div>
</div>

<!-- mobile Menu overlay -->
<div
  class="fixed hidden top-16 inset-0 bg-black/20 z-30 transition-opacity duration-300 md:hidden"
  *ngIf="isMenuOpen"
  (click)="toggleMenu($event)"
></div>
